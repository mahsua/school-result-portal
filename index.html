<!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>www.mahsua.com</title>
      <!-- Tailwind CSS CDN -->
      <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
      <link href="[https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap)" rel="stylesheet">

      <style>
          :root {
              --primary-blue: #3b82f6; /* blue-500 */
              --accent-pink: #ec4899; /* pink-500 */
              --accent-green: #22c55e; /* green-500 */
              --bg-page: #f0f4f8; /* Light blue-gray background for the page */
              --bg-card: #ffffff; /* White background for the main card */
              --text-primary: #1a202c; /* Dark text */
              --text-secondary: #4a5568; /* Slightly lighter text */
              --border-light: #cbd5e0; /* Light gray border */
              --header-bg: #e2e8f0; /* Light header background for tables */
          }

          body {
              font-family: 'Inter', sans-serif;
              background-color: var(--bg-page);
              color: var(--text-primary);
          }

          /* Main container styling */
          .result-container {
              background-color: var(--bg-card);
              border-color: var(--primary-blue); /* Top border color */
          }

          /* Text colors */
          .text-gray-800 {
              color: var(--text-primary);
          }
          .text-gray-600 {
              color: var(--text-secondary);
          }
          .text-blue-600 {
              color: var(--primary-blue);
          }
          .text-red-600 {
              color: var(--accent-pink); /* Using pink for error messages */
          }

          /* Input and select styles */
          input, select {
              background-color: var(--bg-card);
              color: var(--text-primary);
              border-color: var(--border-light);
          }
          input::placeholder {
              color: var(--text-secondary);
              opacity: 0.7;
          }
          .focus\:ring-blue-500:focus {
              outline-color: var(--primary-blue);
              border-color: var(--primary-blue);
          }

          /* Buttons */
          .bg-blue-600 {
              background-color: var(--primary-blue);
          }
          .hover\:bg-blue-700:hover {
              background-color: #2563eb; /* A slightly darker blue for hover */
          }
          .bg-gray-500 {
              background-color: #64748b; /* A standard gray for print button */
          }
          .hover\:bg-gray-600:hover {
              background-color: #475569; /* Darker gray for print button hover */
          }


          /* Enhancements for input fields and select elements */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
              -webkit-appearance: none;
              margin: 0;
          }
          input[type="number"] {
              -moz-appearance: textfield;
          }

          /* School Header Styling */
          .school-header {
              display: flex;
              align-items: center;
              justify-content: center; /* Center horizontally */
              gap: 1rem; /* Space between logo and text */
              margin-bottom: 2rem;
              padding-bottom: 1rem;
              border-bottom: 1px solid var(--border-light);
          }

          .school-logo {
              width: 60px; /* Adjust size as needed */
              height: 60px;
              object-fit: contain;
          }

          .school-name {
              font-size: 2.25rem; /* text-4xl */
              font-weight: 700;
              color: var(--primary-blue); /* School name in primary blue */
          }

          /* Styling for the result card */
          .result-card {
              background-color: var(--bg-page); /* A slightly different background for the result card */
              border: 1px solid var(--border-light);
              padding: 1.5rem;
              border-radius: 0.5rem;
              box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
              margin-top: 1.5rem;
          }

          /* Styling for headings inside result card */
          .result-card h2 {
              font-size: 1.75rem; /* text-2xl */
              font-weight: 700; /* font-bold */
              color: var(--text-primary);
              margin-bottom: 1rem;
              text-align: center;
          }

          /* Styling for key-value pairs in result card - Gaps reduced here! */
          .result-item {
              display: flex;
              justify-content: space-between;
              padding: 0.3rem 0; /* Reduced padding for tighter spacing */
              border-bottom: 1px dashed var(--border-light);
          }

          .result-item:last-child {
              border-bottom: none;
          }

          .result-item .label {
              font-weight: 500;
              color: var(--text-secondary);
          }

          .result-item .value {
              font-weight: 600;
              color: var(--text-primary);
              text-align: right;
          }

          /* Styling for subject marks table */
          .marks-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 1.5rem;
              font-size: 0.95rem;
              color: var(--text-primary);
          }

          .marks-table th, .marks-table td {
              border: 1px solid var(--border-light);
              padding: 0.75rem;
              text-align: left;
          }

          .marks-table th {
              background-color: var(--header-bg);
              font-weight: 600;
              color: var(--text-primary);
          }

          .marks-table tr:nth-child(even) {
              background-color: #f7fafc; /* light gray for even rows */
          }

          .marks-table tr:hover {
              background-color: #e2e8f0; /* hover effect */
          }

          /* Specific styling for Pass/Fail status */
          .status-pass {
              color: var(--accent-green); /* green-500 */
              font-weight: 700;
          }

          .status-fail {
              color: var(--accent-pink); /* pink-500 */
              font-weight: 700;
          }

          /* Print specific styles */
          @media print {
              body {
                  background-color: white !important;
                  color: black !important;
                  margin: 0; /* Remove default body margin */
              }
              /* Hide the main container's shadow and border for print */
              .result-container {
                  box-shadow: none !important;
                  border: none !important;
                  padding: 0 !important; /* Remove padding from main container */
                  width: 100% !important; /* Ensure it takes full width */
                  max-width: 100% !important;
              }
              /* Hide form elements and buttons */
              .grid, .text-center.text-gray-600, button, #messageDisplay,
              h1.text-3xl { /* Target the main h1 specifically */
                  display: none !important;
              }
              /* Make result card take full width for print and remove its shadow */
              .result-card {
                  margin-top: 0 !important;
                  padding: 1rem !important;
                  width: 100% !important;
                  max-width: 100% !important;
                  box-shadow: none !important; /* Remove shadow for print */
                  border: 1px solid black !important; /* Ensure inner border is black */
                  background-color: white !important; /* Ensure white background */
              }
              /* Ensure school header is visible for print */
              .school-header {
                  display: flex !important; /* Make it visible */
                  justify-content: center !important; /* Center content */
                  align-items: center !important;
                  margin-top: 1rem !important;
                  margin-bottom: 1rem !important;
                  padding-bottom: 0.5rem !important;
                  border-bottom: 1px solid black !important; /* Black border for print */
              }
              .school-logo {
                  display: block !important; /* Ensure logo is visible */
                  width: 50px !important; /* Adjust size for print */
                  height: 50px !important;
              }
              .school-name {
                  display: block !important; /* Ensure name is visible */
                  font-size: 1.8rem !important; /* Adjust font size for print */
                  color: black !important; /* Black text for print */
                  font-weight: bold !important;
              }

              /* Ensure result heading is visible */
              .result-card h2 {
                  display: block !important;
                  font-size: 1.5em !important;
                  color: black !important;
                  margin-bottom: 0.5em !important;
              }
              /* Ensure tables and items have proper print styles */
              .marks-table, .marks-table th, .marks-table td {
                  border-color: black !important;
                  color: black !important;
              }
              .marks-table th {
                background-color: #f0f0f0 !important; /* Light gray for print table header */
              }
              .marks-table tr:nth-child(even) {
                  background-color: #fafafa !important; /* Slightly off-white for even rows */
              }

              .result-item, .result-item .label, .result-item .value {
                  border-color: black !important;
                  color: black !important;
                  padding: 0.2rem 0 !important; /* Adjust padding for print if needed */
              }
          }
      </style>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center p-4 font-inter relative">
      <div class="bg-white p-6 md:p-10 rounded-lg shadow-xl w-full max-w-2xl border-t-4 border-blue-500 result-container">
          <!-- School Header (visible on screen, styled for print) -->
          <div class="school-header hidden-on-print"> <!-- This class will be removed by print media query -->
              <img src="[https://placehold.co/60x60/E0F2FE/1D4ED8?text=Logo](https://placehold.co/60x60/E0F2FE/1D4ED8?text=Logo)" alt="School Logo" class="school-logo">
              <!-- Replace the src above with your actual logo URL, e.g., src="images/school_logo.jpg" -->
              <span class="school-name">MAHSUA School Online Result Portal</span>
          </div>
          <!-- The h1 below is hidden on print, school-name above is shown -->
          <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-6 print-hidden">
              School Online Result Portal
          </h1>
          <p class="text-center text-gray-600 mb-8 print-hidden">Enter your details to view your result.</p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 print-hidden">
              <!-- Roll Number Input -->
              <div>
                  <label for="rollNumber" class="block text-gray-700 text-sm font-semibold mb-2">Roll Number</label>
                  <input
                      type="number"
                      id="rollNumber"
                      placeholder="e.g., 2001"
                      class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                  />
              </div>

              <!-- Class Selection -->
              <div>
                  <label for="classSelect" class="block text-gray-700 text-sm font-semibold mb-2">Select Class</label>
                  <select
                      id="classSelect"
                      class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                  >
                      <!-- Options will be populated by JavaScript -->
                  </select>
              </div>

              <!-- Enrollment Number Input -->
              <div class="md:col-span-2">
                  <label for="enrollmentNumber" class="block text-gray-700 text-sm font-semibold mb-2">Enrollment Number</label>
                  <input
                      type="text"
                      id="enrollmentNumber"
                      placeholder="e.g., ENR001AS"
                      class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                  />
              </div>
          </div>

          <!-- View Result Button -->
          <button
              id="viewResultBtn"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 print-hidden"
          >
              View Result
          </button>

          <!-- Loading Indicator -->
          <div id="loadingIndicator" class="mt-4 text-center text-blue-600 font-medium hidden print-hidden">
              Fetching result...
          </div>

          <!-- Message Display Area -->
          <div id="messageDisplay" class="mt-6 text-center text-red-600 font-medium print-hidden">
              <!-- Messages like "Student not found" will appear here -->
          </div>

          <!-- Result Display Area -->
          <div id="resultDisplay" class="mt-8">
              <!-- Student result details will be dynamically inserted here -->
          </div>

          <!-- Print Button (conditionally displayed by JS after result is shown) -->
          <button
              id="printResultBtn"
              class="hidden w-full mt-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 print-hidden"
          >
              Print Result
          </button>
      </div>

      <!-- JavaScript Logic -->
      <script>
          // --- Data Source Configuration ---
          const classDataPaths = {
              "Class 1": "data/class_1.json",
              "Class 2": "data/class_2.json"
              // Add more classes here as you create their JSON files
          };

          // Cache for fetched data to avoid re-fetching the same class multiple times
          const fetchedClassData = {};

          // --- DOM Elements ---
          const rollNumberInput = document.getElementById('rollNumber');
          const classSelect = document.getElementById('classSelect');
          const enrollmentNumberInput = document.getElementById('enrollmentNumber');
          const viewResultBtn = document.getElementById('viewResultBtn');
          const loadingIndicator = document.getElementById('loadingIndicator');
          const messageDisplay = document.getElementById('messageDisplay');
          const resultDisplay = document.getElementById('resultDisplay');
          const printResultBtn = document.getElementById('printResultBtn');


          // --- Utility Functions ---

          /**
           * Displays messages to the user (e.g., error messages, success messages).
           * @param {string} message - The message to display.
           * @param {string} type - The type of message ('error', 'success', 'info'). Affects styling.
           */
          function showMessage(message, type = 'info') {
              messageDisplay.textContent = message;
              messageDisplay.className = 'mt-6 text-center font-medium'; // Reset classes
              if (type === 'error') {
                  messageDisplay.classList.add('text-red-600');
              } else if (type === 'success') {
                  messageDisplay.classList.add('text-green-600');
              } else {
                  messageDisplay.classList.add('text-gray-600');
              }
              resultDisplay.innerHTML = ''; // Clear previous results
              printResultBtn.classList.add('hidden'); // Hide print button
          }

          /**
           * Renders the student's result on the page.
           * @param {Object} studentData - The object containing student's result data.
           * @param {string} selectedClass - The class selected by the user.
           */
          function renderResult(studentData, selectedClass) {
              resultDisplay.innerHTML = ''; // Clear previous content
              messageDisplay.innerHTML = ''; // Clear any messages

              const resultCard = document.createElement('div');
              resultCard.className = 'result-card'; // Custom class from style.css

              // Create header for result card (visible on screen and print)
              const header = document.createElement('h2');
              header.textContent = `Result for ${selectedClass}`;
              resultCard.appendChild(header);

              // General student details (spacing adjusted via CSS padding, not flex gaps)
              const detailsContainer = document.createElement('div');
              detailsContainer.className = ''; // No spacing class needed here, controlled by .result-item padding

              const createResultItem = (label, value, valueClass = '') => {
                  const item = document.createElement('div');
                  item.className = 'result-item'; // Custom class with adjusted padding
                  const labelSpan = document.createElement('span');
                  labelSpan.className = 'label'; // Custom class
                  labelSpan.textContent = label;
                  const valueSpan = document.createElement('span');
                  valueSpan.className = `value ${valueClass}`; // Custom class
                  valueSpan.textContent = value;
                  item.appendChild(labelSpan);
                  item.appendChild(valueSpan);
                  return item;
              };

              detailsContainer.appendChild(createResultItem('Student Name', studentData['Student Name']));
              // Add Class information here
              detailsContainer.appendChild(createResultItem('Class', selectedClass.replace('Class ', ''))); // Extract just the number
              detailsContainer.appendChild(createResultItem('Roll Number', studentData['Student Roll Number']));
              detailsContainer.appendChild(createResultItem('Enrollment Number', studentData['Enrollment Number']));
              detailsContainer.appendChild(createResultItem('Percentage', `${studentData['Percentage']}%`));
              detailsContainer.appendChild(createResultItem('Grade', studentData['Grade']));

              const passFailClass = studentData['Pass/Fail'] === 'Pass' ? 'status-pass' : 'status-fail';
              detailsContainer.appendChild(createResultItem('Status', studentData['Pass/Fail'], passFailClass));

              resultCard.appendChild(detailsContainer);

              // Marks Table
              const marksTable = document.createElement('table');
              marksTable.className = 'marks-table'; // Custom class from style.css

              const thead = document.createElement('thead');
              const headerRow = document.createElement('tr');
              ['Subject', 'Marks Obtained'].forEach(text => {
                  const th = document.createElement('th');
                  th.textContent = text;
                  headerRow.appendChild(th);
              });
              thead.appendChild(headerRow);
              marksTable.appendChild(thead);

              const tbody = document.createElement('tbody');
              // Iterate through keys that start with "Mark Obtained"
              for (const key in studentData) {
                  if (key.startsWith('Mark Obtained')) {
                      const subjectName = key.replace('Mark Obtained (', '').replace(')', '');
                      const tr = document.createElement('tr');
                      const tdSubject = document.createElement('td');
                      tdSubject.textContent = subjectName;
                      const tdMarks = document.createElement('td');
                      tdMarks.textContent = studentData[key];
                      tr.appendChild(tdSubject);
                      tr.appendChild(tdMarks);
                      tbody.appendChild(tr);
                  }
              }
              marksTable.appendChild(tbody);
              resultCard.appendChild(marksTable);

              resultDisplay.appendChild(resultCard);
              printResultBtn.classList.remove('hidden'); // Show print button after result is rendered
          }


          // --- Main Logic ---

          /**
           * Populates the class dropdown dynamically based on the configured JSON data paths.
           */
          function populateClassDropdown() {
              classSelect.innerHTML = '<option value="">Select a Class</option>';
              for (const className in classDataPaths) {
                  const option = document.createElement('option');
                  option.value = className;
                  option.textContent = className;
                  classSelect.appendChild(option);
              }
          }

          /**
           * Fetches JSON data for a given class.
           * Uses a cache to avoid re-fetching data.
           * @param {string} className - The name of the class (e.g., "Class 1").
           * @returns {Promise<Array<Object>>} A promise that resolves with the parsed student data.
           */
          async function fetchClassData(className) {
              if (fetchedClassData[className]) {
                  console.log(`Using cached data for ${className}`);
                  return fetchedClassData[className];
              }

              const path = classDataPaths[className];
              if (!path) {
                  throw new Error(`No data file path configured for ${className}`);
              }

              console.log(`Fetching data for ${className} from: ${path}`);
              try {
                  const response = await fetch(path);
                  if (!response.ok) {
                      throw new Error(`HTTP error! status: ${response.status} - Could not load ${path}. Ensure the 'data' folder and JSON files exist and the page is served by a web server.`);
                  }
                  const jsonData = await response.json();
                  fetchedClassData[className] = jsonData; // Cache the data
                  return jsonData;
              } catch (error) {
                  console.error('Error fetching class data:', error);
                  throw new Error(`Failed to load data for ${className}. Check console for details. Ensure 'data' folder and JSON files are correct and the page is served by a web server (e.g., http://localhost).`);
              }
          }

          /**
           * Handles the click event for the "View Result" button.
           */
          viewResultBtn.addEventListener('click', async () => {
              const rollNumber = parseInt(rollNumberInput.value.trim());
              const selectedClass = classSelect.value.trim();
              const enrollmentNumber = enrollmentNumberInput.value.trim().toUpperCase();

              // --- Input Validation ---
              if (!rollNumber || isNaN(rollNumber)) {
                  showMessage('Please enter a valid Roll Number.', 'error');
                  return;
              }
              if (!selectedClass) {
                  showMessage('Please select a Class.', 'error');
                  return;
              }
              if (!enrollmentNumber) {
                  showMessage('Please enter your Enrollment Number.', 'error');
                  return;
              }

              loadingIndicator.classList.remove('hidden'); // Show loading indicator
              messageDisplay.innerHTML = ''; // Clear previous messages
              resultDisplay.innerHTML = ''; // Clear previous results
              printResultBtn.classList.add('hidden'); // Hide print button while fetching

              try {
                  // Fetch data for the selected class
                  const classData = await fetchClassData(selectedClass);

                  if (!classData || classData.length === 0) {
                      showMessage(`No data found for ${selectedClass}. The JSON file might be empty or malformed.`, 'error');
                      return;
                  }

                  // Find the student in the fetched class data
                  const studentResult = classData.find(student =>
                      student['Student Roll Number'] === rollNumber &&
                      student['Enrollment Number'].toUpperCase() === enrollmentNumber
                  );

                  // --- Display Result ---
                  if (studentResult) {
                      renderResult(studentResult, selectedClass);
                  } else {
                      showMessage('Student not found or credentials do not match for the selected class. Please check your details.', 'error');
                  }
              } catch (error) {
                  showMessage(error.message, 'error');
              } finally {
                  loadingIndicator.classList.add('hidden'); // Hide loading indicator
              }
          });

          // Event listener for Print button
          printResultBtn.addEventListener('click', () => {
              window.print();
          });


          // --- Initialize ---
          // Populate the class dropdown when the page loads
          document.addEventListener('DOMContentLoaded', populateClassDropdown);
      </script>
  </body>
  </html>
